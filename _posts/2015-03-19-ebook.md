---
layout: page
title: code2ebook 支持golang阅读
---

可以根据[code2ebook](https://github.com/agentzh/code2ebook#generate-epub-ebooks-for-ipadiphone)github上的介绍

##在mac上操作步骤如下：

#####1.安装vim，ctags（mac自带，我重装了：brew install ctags-exuberant），perl（mac上自带）

#####2.使ctags5.8支持golang，默认在$HOME下添加.ctags（我这边没找到.ctags，就自己添加了），然后在.ctags里面添加如下内容：
 
    --langdef=Go 
    --langmap=Go:.go 
    --regex-Go=/func([ \t]+\([^)]+\))?[ \t]+([a-zA-Z0-9_]+)/\2/f,func/
    --regex-Go=/var[ \t]+([a-zA-Z_][a-zA-Z0-9_]+)/\1/v,var/ 
    --regex-Go=/type[ \t]+([a-zA-Z_][a-zA-Z0-9_]+)/\1/t,type/ 

可以通过$ctags --list-maps=all指令，查看是否多了[Go       *.go]来确定是否添加成功。

#####3.产生树形目录结构

 
    export PATH=/path/to/code2ebook:$PATH <br />
    cd /path/to/your/project/ <br />
    src2html.pl --tab-width 4 --color --cross-reference \ <br />
             --navigator --line-numbers . 'Your Book Title' <br />


#####4.转成ebook

可以用ebook-convert转，下载[calibre-ebook](http://calibre-ebook.com/download)

mac上下载完了，打开.dmg，通过Preferences->Advanced->Miscellaneous，设置install command line tools

最后看需要转换成什么格式的，比如可以在ipad上阅读的，如下：

 
    cd /path/to/your/project/

    # assuming we specified the "." directory while running src2html.pl<br />
    ebook-convert html_out/index.html my-project.epub \<br />
        --output-profile ipad3 \<br />
        --no-default-epub-cover \ <br />
        --title "Your Book Title" --publisher 'Your Name' \ <br />
        --language en <br />
        --authors 'Your Author Name' <br />

